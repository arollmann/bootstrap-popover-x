/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2021
 * @version 1.5.0
 *
 * Bootstrap Popover Extended - Popover with modal behavior, styling enhancements and more.
 *
 * For more JQuery/Bootstrap plugins and demos visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof module&&"object"==typeof module.exports?require("jquery"):window.jQuery)}(function(t){"use strict";t.fn.popoverXBsVersion||(t.fn.popoverXBsVersion=window.Modal&&window.Modal.VERSION||window.bootstrap&&window.bootstrap.Modal&&bootstrap.Modal.VERSION||"3.x.x");var o,e,r;o={NAMESPACE:".popoverX",modalOptions:["keyboard","focus","show"],kvLog:function(t){t="bootstrap-popover-x: "+t,window.console&&window.console.log?window.console.log(t):window.alert(t)},addCss:function(t,o){t.removeClass(o).addClass(o)},handler:function(t,e,r){var i=e+o.NAMESPACE;return t.off(i).on(i,r)},raise:function(t,e,r){var i=e+(void 0===r?".target":r)+o.NAMESPACE;return t.trigger(i)},isBs:function(o){var e=t.trim((t.fn.popoverXBsVersion||"")+"");return o=parseInt(o,10),e?o===parseInt(e.charAt(0),10):4===o},getDataAttr:function(t){return"data-"+(o.isBs(5)?"bs-":"")+t}},e=function(o,e){var r=this;r.options=e,r.$element=t(o),r.init()},r=function(o,e){var r=this;r.options=e,r.$element=t(o),r.$dialog=r.$element,r.init()},e.prototype={constructor:e,init:function(){var e,r,i=this,n=i.$element,a=i.options||{},p=n.attr("href"),s=function(t){o.kvLog("PopoverX initialization skipped! "+t)};if(i.href=p,!n||!n.length)return void s("PopoverX triggering button element could not be found.");if(n.attr("data-toggle","popover-x"),a.target?(n.data("target",a.target),r=t(a.target)):r=t(n.data("target")||p&&p.replace(/.*(?=#[^\s]+$)/,"")),!r.length)return void s("PopoverX dialog element could not be found.");if(i.$dialog=r,r.attr(o.getDataAttr("backdrop"),"false"),o.addCss(r,"popover-x"),!r.data("popover-x")){var l=t.extend(!0,{remote:p&&!/#/.test(p)},r.data(),n.data(),a);l.$target=n,r.popoverX(l)}return e=a.trigger,"string"!=typeof e?void s("Invalid or improper configuration for PopoverX trigger."):(e=e.split(" "),void t.each(e,function(t,o){i.listen(o)}))},listen:function(t){var e,r,i=this,n=i.$element,a=i.$dialog,p=!1,s=i.href;"manual"!==t&&("click"!==t&&"keyup"!==t&&(p=!0),p?(e="hover"===t?"mouseenter":"focusin",r="hover"===t?"mouseleave":"focusout",o.handler(n,e,function(){o.raise(a,e).popoverX("show")}),o.handler(n,r,function(){o.raise(a,r).popoverX("hide")})):o.handler(n,t,function(e){return"keyup"===t?void(a&&27===e.which&&o.raise(a,t).popoverX("hide")):(s&&"click"===t&&e.preventDefault(),o.raise(a,t).popoverX("toggle"),void o.handler(a,"hide",function(){n.focus()}))}))},destroy:function(){var t=this;t.$element.off(o.NAMESPACE),t.$dialog.modal("dispose").off(o.NAMESPACE)}},r.prototype={constructor:r,init:function(){var e=this,r=e.$element,i=e.options,n=i.$container,a=o.isBs(5);n&&n.length&&(e.$body=n),e.$body&&e.$body.length||(e.$body=t(document.body)),t.each(o.modalOptions,function(t,e){i[e]&&r.attr(o.getDataAttr(e),i[e])}),r.attr(o.getDataAttr("backdrop"),"false"),a&&!r.find(".modal-dialog").length&&(t(document.createElement("div")).addClass("modal-dialog").css({margin:0,"pointer-events":"all"}).insertAfter(r).append(r.contents()).appendTo(r),o.addCss(r.find(".arrow"),"popover-arrow")),o.addCss(r,"is-bs"+t.fn.popoverXBsVersion.charAt(0)),e.bodyPadding=e.$body.css("padding"),e.$target=e.options.$target,e.$marker=t(document.createElement("div")).addClass("popover-x-marker").insertAfter(r).hide(),r.find(".popover-footer").length&&o.addCss(r,"has-footer"),e.options.remote&&r.find(".popover-content").on("load",e.options.remote,function(){r.trigger("load.complete.popoverX")}),r.on("click.dismiss"+o.NAMESPACE,'[data-dismiss="popover-x"]',t.proxy(e.hide,e)),i.closePopoverOnBlur&&t(document).on("click",function(o){var e=t(o.target);e.closest('[data-toggle="popover-x"]').length||(e.closest(".popover-x").length?o.stopPropagation():t(".popover-x:visible").popoverX("hide"))});var p,s="hide.bs.modal.popoverX",l=t(".modal");l.length&&(p=l.find("[data-toggle='popover-x']"),p.length&&l.off(s).on(s,function(){p.each(function(){var o=t(this).data("target")||null,e=t(o);e.length&&e.is(":visible")&&e.popoverX("hide")})})),t(window).resize(function(){r.hasClass("kv-popover-active")&&(e.hide(),setTimeout(function(){e.show(!0)},50))})},getPlacement:function(){var t=this,o=t.getPosition(),e=t.options.placement,r=document.documentElement,i=document.body,n=r.clientWidth,a=r.clientHeight,p=Math.max(i.scrollTop||0,r.scrollTop),s="horizontal"===e,l=Math.max(i.scrollLeft||0,r.scrollLeft),d="vertical"===e,f=Math.max(0,o.left-l),h=Math.max(0,o.top-p),c="auto"===e||s||d,g=window.innerWidth||r||document.body.clientWidth;if(t.options.autoPlaceSmallScreen&&g<t.options.smallScreenWidth&&(c=!0),c)return n/3>f?a/3>h?s?"right right-top":"bottom bottom-left":2*a/3>h?d?a/2>=h?"bottom bottom-left":"top top-left":"right":s?"right right-bottom":"top top-left":2*n/3>f?a/3>h?s?n/2>=f?"right right-top":"left left-top":"bottom":2*a/3>h?s?n/2>=f?"right":"left":a/2>=h?"bottom":"top":s?n/2>=f?"right right-bottom":"left left-bottom":"top":a/3>h?s?"left left-top":"bottom bottom-left":2*a/3>h?d?a/2>=h?"bottom-right":"top-right":"left":s?"left left-bottom":"top top-left";switch(e){case"auto-top":return n/3>f?"top top-left":2*n/3>f?"top":"top top-right";case"auto-bottom":return n/3>f?"bottom bottom-left":2*n/3>f?"bottom":"bottom bottom-right";case"auto-left":return a/3>h?"left left-top":2*a/3>h?"left":"left left-bottom";case"auto-right":return a/3>h?"right right-top":2*a/3>h?"right":"right right-bottom";default:return e}},getPosition:function(){var o=this,e=o.$target,r=e[0].getBoundingClientRect(),i=o.$body,n=i.css("position");if(i.is(document.body)||"static"===n)return t.extend({},e.offset(),{width:e[0].offsetWidth||r.width,height:e[0].offsetHeight||r.height});if("relative"===n)return{top:e.offset().top-i.offset().top,left:e.offset().left-i.offset().left,width:e[0].offsetWidth||r.width,height:e[0].offsetHeight||r.height};var a=i[0].getBoundingClientRect();return{top:r.top-a.top+i.scrollTop(),left:r.left-a.left+i.scrollLeft(),width:r.width,height:r.height}},refreshPosition:function(){var t,e=this,r=e.$element,i=e.getPosition(),n=r[0].offsetWidth,a=r[0].offsetHeight,p=e.getPlacement();switch(p){case"bottom":t={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"bottom bottom-left":t={top:i.top+i.height,left:i.left};break;case"bottom bottom-right":t={top:i.top+i.height,left:i.left+i.width-n};break;case"top":t={top:i.top-a,left:i.left+i.width/2-n/2};break;case"top top-left":t={top:i.top-a,left:i.left};break;case"top top-right":t={top:i.top-a,left:i.left+i.width-n};break;case"left":t={top:i.top+i.height/2-a/2,left:i.left-n};break;case"left left-top":t={top:i.top,left:i.left-n};break;case"left left-bottom":t={top:i.top+i.height-a,left:i.left-n};break;case"right":t={top:i.top+i.height/2-a/2,left:i.left+i.width};break;case"right right-top":t={top:i.top,left:i.left+i.width};break;case"right right-bottom":t={top:i.top+i.height-a,left:i.left+i.width};break;default:o.kvLog("Invalid popover placement '"+p+"'.")}r.removeClass("bottom top left right bottom-left top-left bottom-right top-right left-bottom left-top right-bottom right-top").css(t).addClass(p+" in")},validateOpenPopovers:function(){var o=this,e=o.$element;o.options.closeOpenPopovers&&o.$body.find(".popover:visible").each(function(){var o=t(this);o.is(e)||o.popoverX("hide")})},hide:function(){var t=this,o=t.$element;t.$body.removeClass("popover-x-body"),o.removeClass("kv-popover-active"),o.modal("hide"),o.insertBefore(t.$marker)},show:function(t){var e=this,r=e.$element;r.addClass("kv-popover-active"),r.css(e.options.dialogCss).appendTo(e.$body),t||e.validateOpenPopovers(),o.addCss(e.$body,"popover-x-body"),r.modal("show"),e.$body.css({padding:e.bodyPadding}),r.css({padding:0}),e.refreshPosition()},toggle:function(){var t=this;t.$element.is(":visible")?t.hide():t.show()},destroy:function(){var t=this;t.$element.modal("dispose").off(o.NAMESPACE)}},t.fn.popoverButton=function(o){var r=this;return r.each(function(){var r=t(this),i=r.data("popover-button"),n=t.extend({},t.fn.popoverButton.defaults,r.data(),"object"==typeof o&&o);i||r.data("popover-button",i=new e(this,n)),"string"==typeof o&&i[o]()})},t.fn.popoverX=function(o){var e=this;return e.each(function(){var e=t(this),i=e.data("popover-x"),n=t.extend({},t.fn.popoverX.defaults,e.data(),"object"==typeof o&&o);n.$target||(i&&i.$target?n.$target=i.$target:n.$target=o.$target||t(o.target)),i||e.data("popover-x",i=new r(this,n)),"string"==typeof o?i[o]():n.show&&i.show(!0)})},t.fn.popoverButton.defaults={trigger:"click keyup"},t.fn.popoverX.defaults=t.extend(!0,{},{placement:"auto",dialogCss:{top:0,left:0,display:"block","z-index":1065},autoPlaceSmallScreen:!0,smallScreenWidth:640,closeOpenPopovers:!0,closePopoverOnBlur:!0,keyboard:!0,focus:!0}),t.fn.popoverButton.Constructor=e,t.fn.popoverX.Constructor=r,t(document).ready(function(){var o=t("[data-toggle='popover-x']");o.length&&o.popoverButton()})});